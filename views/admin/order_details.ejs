<link rel="stylesheet" href="/css/order_details.css">
<style>
    em{
        padding: 0 10px;
    }
</style>

<section id="order_details">
    <div class="order-details-section">
        <a href="/admin/view-pdf">View PDF</a><em>|</em><a href="/admin/view-pdfs">Delete PDF</a>

        <h2>Order Details</h2>
        <table class="order-details-table">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Image URL</th>
                    <th>Quantity</th>
                    <th>Size</th>
                    <th>Paid</th>
                    <th>Product Name</th>
                </tr>
            </thead>
            <tbody>
                <% order_details.forEach(detail => { %>
                    <tr>
                        <td><%= detail.user_id %></td>
                        <td><img src="<%= detail.image_url %>" alt="<%= detail.product_name %>" style="width: 70px; height: auto;" /></td>
                        <td><%= detail.quantity %></td>
                        <td><%= detail.size %></td>
                        <td><%= detail.paid ? 'Yes' : 'No' %></td>
                        <td><%= detail.product_name %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

    <div class="update-orders">
        <h2>Update Orders</h2>
        <div class="update-orders-select">
            <label for="order_id">Order ID:</label>
            <input type="number" id="order_id" name="order_id" min="1" required />
    
            <label for="status">Status:</label>
            <select name="status" id="status">
                <option value="Delivered">Delivered</option>
                <option value="Shipped">Shipped</option>
                <option value="Pending">Pending</option>
                <option value="Cancelled">Cancelled</option>
            </select>
    
            <label for="paid">Paid:</label>
            <select name="payment" id="paid">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        
        <!-- Update Now button -->
        <button type="button" class="update-button">Update Now</button>
    </div>
    
    
    
    
    <div class="updated-orders-section">
        <h2>Updated Orders</h2>
        <table class="update-orders-table">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Status</th>
                    <th>Paid</th>
                    <th>Updated At</th>
                </tr>
            </thead>
            <tbody>
                <% orders.forEach(order => { %>
                    <tr>
                        <td><%= order.username  %></td>
                        <td><%= order.status %></td>
                        <td><%= order.paid ? 'Yes' : 'No' %></td>
                        <td><%= order.updated_at ? new Date(order.updated_at).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : 'Not updated yet' %> </td>
                    </tr>
                <% }) %>                
            </tbody>
        </table>
    </div>

    <script src="/js/order_details.js"></script>
    
</section>