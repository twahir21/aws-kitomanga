<%- include('../includes/title') %>
    <link rel="stylesheet" href="/css/adminEdit.css">
</head>

    <div class="edit-wrapper">
            <section id="editProduct">
                <h1 class="page-title">Edit Product</h1>
        
                <!-- Flash messages section -->
                <% if (success_msg && success_msg.length > 0) { %>
                    <div class="alert alert-success">
                        <%= success_msg %>
                    </div>
                <% } %>
        
                <% if (error_msg && error_msg.length > 0) { %>
                    <div class="alert alert-danger">
                        <%= error_msg %>
                    </div>
                <% } %>
        
                <form class="product-form" id="editProductForm" action="/admin/edit-product/<%= product.id %>" method="post" enctype="multipart/form-data">
        
                    <!-- Existing Image URL -->
                    <input type="hidden" name="existing_image_url" value="<%= product.image_url %>">
                    <input type="hidden" name="product_id" value="<%= product.id %>"> <!-- Assuming product_id is not editable -->
        
                    <div class="form-group">
                        <label for="productName">Product Name</label>
                        <input type="text" id="productName" name="product_name" value="<%= product.product_name %>" required>
                    </div>
        
                    <div class="form-group">
                        <label for="brand">Brand name:</label>
                        <input type="text" id="brand" name="brand" value="<%= product.brand %>" required>
                    </div>
        
                    <div class="form-group">
                        <label for="productPrice">Price ($):</label>
                        <input type="text" id="productPrice" name="price" value="<%= product.price %>" required >
                    </div>
        
                    <div class="form-group">
                        <label for="PriceDeleted">Deleted Price ($):</label>
                        <input type="text" id="PriceDeleted" name="price_deleted" value="<%= product.price_deleted %>" >
                    </div>
        
                    <div class="form-group">
                        <label for="productImage">Product Image:</label>
                        <div class="custom-file-input">
                            <input type="file" id="productImage" accept="image/*" name="image">
                            <label for="productImage">Choose File</label>
                            <span id="fileName">No file chosen</span>
                        </div>
                        <div class="existing-image">
                            <% if (product.image_url) { %>
                                <img src="<%= product.image_url %>" alt="<%= product.product_name %>" width="150px" height="150px">
                                <p>Current Image</p>
                            <% } else { %>
                                <p>No image available.</p>
                            <% } %>
                        </div>
                    </div>
        
                    <div class="form-group">
                        <label for="rating">Rating Value:</label>
                        <input type="number" id="rating" name="rating" value="<%= product.rating %>" required step="0.1" min="0" max="5">
                    </div>
                    <button type="submit" class="submit-btn">Update Product</button>
                </form>
            </section>   
    </div>

    <!-- Include your JS files here -->
    <script src="/js/adminEdit.js"></script>
    <%- include('../includes/footer')  %>

